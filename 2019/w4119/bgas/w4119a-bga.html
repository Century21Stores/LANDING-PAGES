<!-- w4119a-bga - w41-19-a Gift Cards - JuanMa - 11.7.19 -->

<style>

.jm-bga-14-gbga_1_w41-19-a{
  padding: 17% 5%;
}
.jm-bga-14-gbga_1_w41-19-a .jm-bga-cta-wrap{
    color: white;
    bottom: 64%;    
}
.jm-bga-wrap .jm-bga-header{
    color: white;
    font-size: 2.7em;

}
.jm-bga-cta-wrap > p{
    letter-spacing: 0.05em;
    font-size: 1.1em;    
}
.jm-bga-wrap .jm-col{
    display: inline-block;
    vertical-align: middle;
    line-height: 1;
    font-size: 1em;
}
.jm-bga-wrap .jm-75{
    font-size: 4.5em;
    letter-spacing: -0.05em;
}
.jm-bga-wrap .jm-percentage{
  font-size: 2.6em;
}

/* [START] SPECIFIC BGA  */
/*.jm-bga-14-bga_1_w32-19-d .jm-bga-line1{
  background: none;
  color: white;
  font-size: 3.6em;
  font-weight: bold;
  font-weight: 700;
  margin: 0 auto;
  width: 100%;
}*/

/* [END] SPECIFIC BGA  */

@media screen and (max-width: 500px){
.plp-wrapper .jm-bga-type-1{
  display: none;
  width: 100%;
  padding-top: 60%;
}


}
</style>

<script>
console.log('bgas');

//BGAs DATA

//GBGA_1 GIFT CARDS 11/11 - continuous
gbga_1_position = "15";
gbga_1_type = "1";
gbga_1_key = "gbga_1_w41-19-a";
// gbga_1_line_1 = "<p class='jm-bga-line1'>ONLINE & IN-STORE</p>";
gbga_1_h2 = "<span><b>GIFT CARDS</b></span>";
gbga_1_aligment = "flex-start";
gbga_1_url = "/categories/gift-card?imc=bga_p1_giftcards&imccat=w40-19-a_gift-card";
gbga_1_cta = "SHOP NOW";
gbga_1_cta_type = "solidlight";
gbga_1_text_top_cta = "<p>Always a crowd-pleaser</p>";
gbga_1_img = "refresh/refresh-2019/w4119/bga/01_11Week2BGA_Gift-Cards.jpg?$staticlink$";
gbga_1_cat1 = "women,men,shoes,kids,handbags&accessories,home&tech";
// gbga_1_cat3_exceptions = "handbags&accessories > boutiques > luxurydesigner";
gbga_1_cat3_exceptions = "none";

//GBGA_2 E-GIFT CARDS 11/11 - continuous
gbga_2_position = "28";
gbga_2_type = "1";
gbga_2_key = "gbga_1_w41-19-a";
// gbga_1_line_1 = "<p class='jm-bga-line1'>ONLINE & IN-STORE</p>";
gbga_2_h2 = "<span><b >E-GIFT CARDS</b></span>";
gbga_2_aligment = "flex-start";
gbga_2_url = "/categories/e-gift-cards?imc=bga_p1_egiftcards&imccat=w40-19-a_e-gift-cards";
gbga_2_cta = "SHOP NOW";
gbga_2_cta_type = "solidlight";
gbga_2_text_top_cta = "<p>Always a crowd-pleaser</p>";
gbga_2_img = "refresh/refresh-2019/w4119/bga/01_11Week2BGA_Gift-Cards.jpg?$staticlink$";
gbga_2_cat1 = "women,men,shoes,kids,handbags&accessories,home&tech";
// gbga_1_cat3_exceptions = "handbags&accessories > boutiques > luxurydesigner";
gbga_2_cat3_exceptions = "none";


// // DENIM MEN PROMO 9/12 only
// bga_1_position = "15";
// bga_1_type = "1";
// bga_1_key = "bga_1_w32-19-d";
// // bga_1_line_1 = "<p class='jm-bga-line1'>ONLINE & IN SELECT STORES | 6/11-7/2</p>";
// // bga_1_line_1 = "<p class='jm-bga-line1'>FREE GIFT!</p>";
// bga_1_h2 = "<div><p>TODAY ONLY!<br/><span>Buy One, Get One<br/>50% Off<sup><a href='#' id='ju_bga_denim_event'>*</a></sup></span><br/>SELECT DENIM STYLES</p></div>";
// bga_1_aligment = "flex-start";
// bga_1_url = "/categories/men-denim-promo?imc=bga_p1&imccat=w3219d_men-denim-promo";
// bga_1_cta = "SHOP NOW";
// bga_1_cta_type = "soliddark";
// // bga_1_text_top_cta = "<img alt='LXRandCO' src='refresh/refresh-2019/W1919/zBGA/LRXandCo-black.png?$staticlink$'>";
// bga_1_img = "refresh/refresh-2019/w3219/bga/000_02_09Week2D_BGA_denimpromo.jpg?$staticlink$";
// bga_1_cat1 = "men";
// bga_1_cat2 = "clothing";
// bga_1_cat3 = "jeans";


// DENIM WOMEN PROMO 9/12 only
// bga_2_position = "15";
// bga_2_type = "1";
// bga_2_key = "bga_1_w32-19-d";
// // bga_1_line_1 = "<p class='jm-bga-line1'>ONLINE & IN SELECT STORES | 6/11-7/2</p>";
// // bga_1_line_1 = "<p class='jm-bga-line1'>FREE GIFT!</p>";
// bga_2_h2 = "<div><p>TODAY ONLY!<br/><span>Buy One, Get One<br/>50% Off<sup><a href='#' id='ju_bga_denim_event'>*</a></sup></span><br/>SELECT DENIM STYLES</p></div>";
// bga_2_aligment = "flex-start";
// bga_2_url = "/categories/women-denim-promo?imc=bga_p1&imccat=w3219d_women-denim-promo";
// bga_2_cta = "SHOP NOW";
// bga_2_cta_type = "soliddark";
// // bga_1_text_top_cta = "<img alt='LXRandCO' src='refresh/refresh-2019/W1919/zBGA/LRXandCo-black.png?$staticlink$'>";
// bga_2_img = "refresh/refresh-2019/w3219/bga/000_02_09Week2D_BGA_denimpromo.jpg?$staticlink$";
// bga_2_cat1 = "women";
// bga_2_cat2 = "clothing";
// bga_2_cat3 = "jeans";


//BGAs LIST ATTRIBUTES


bga_cat_list_global = '{"gbgas":['+


  // BGA_1 GIFT CARDS 11/11 - TBD
  '{  "gposition": "' + gbga_1_position +'",     '+ 
  '   "gtype": "' + gbga_1_type +'",     '+ 
  '   "gkey": "' + gbga_1_key +'",     '+ 
  '   "gcategories1": "' + gbga_1_cat1 +'",     '+ 
  '   "gcategories2": "todo",    '+
  '   "gcategories3": "todo",     '+
  '   "gcategories3_exception": "' + gbga_1_cat3_exceptions +'",     '+ 
  '   "gbga_aligment": "' + gbga_1_aligment +'",     '+ 
  '   "gbga_bg_image": "' + gbga_1_img +'",     '+ 
  '   "gbga_url": "' + gbga_1_url +'",     '+ 
  // '   "gbga_line_1":"'  + gbga_1_line_1 + '",'+
  '   "gbga_h2":"'  + gbga_1_h2 + '",'+
  '   "gbga_text_top_cta":"'  + gbga_1_text_top_cta + '",'+
  '   "gbga_cta_type":"'  + gbga_1_cta_type + '",'+
  '   "gbga_cta_text":"'  + gbga_1_cta + '"'+            
  '},'+

  // BGA_1 E GIFT CARDS 11/1 - TBD
  '{  "gposition": "' + gbga_2_position +'",     '+ 
  '   "gtype": "' + gbga_2_type +'",     '+ 
  '   "gkey": "' + gbga_2_key +'",     '+ 
  '   "gcategories1": "' + gbga_2_cat1 +'",     '+ 
  '   "gcategories2": "todo",    '+
  '   "gcategories3": "todo",     '+
  '   "gcategories3_exception": "' + gbga_2_cat3_exceptions +'",     '+ 
  '   "gbga_aligment": "' + gbga_2_aligment +'",     '+ 
  '   "gbga_bg_image": "' + gbga_2_img +'",     '+ 
  '   "gbga_url": "' + gbga_2_url +'",     '+ 
  // '   "gbga_line_1":"'  + gbga_1_line_1 + '",'+
  '   "gbga_h2":"'  + gbga_2_h2 + '",'+
  '   "gbga_text_top_cta":"'  + gbga_2_text_top_cta + '",'+
  '   "gbga_cta_type":"'  + gbga_2_cta_type + '",'+
  '   "gbga_cta_text":"'  + gbga_2_cta + '"'+            
  '}'+


']}';


// bga_cat_list_specific = '{"bgas":['+

//   '{  "position": "' + bga_1_position +'",     '+ 
//   '   "type": "' + bga_1_type +'",     '+ 
//   '   "key": "' + bga_1_key +'",     '+ 
//   '   "categories1": "' + bga_1_cat1 +'",     '+ 
//   '   "categories2": "' + bga_1_cat2 +'",     '+ 
//   '   "categories3": "' + bga_1_cat3 +'",     '+ 
//   '   "bga_aligment": "' + bga_1_aligment +'",     '+ 
//   '   "bga_bg_image": "' + bga_1_img +'",     '+ 
//   '   "bga_url": "' + bga_1_url +'",     '+ 
//   // '   "bga_line_1":"'  + bga_1_line_1 + '",'+
//   '   "bga_h2":"'  + bga_1_h2 + '",'+
//   // '   "bga_text_top_cta":"'  + bga_1_text_top_cta + '",'+
//   '   "bga_cta_type":"'  + bga_1_cta_type + '",'+
//   '   "bga_cta_text":"'  + bga_1_cta + '"'+   
//   '},'+
  
//   '{  "position": "' + bga_2_position +'",     '+ 
//   '   "type": "' + bga_2_type +'",     '+ 
//   '   "key": "' + bga_2_key +'",     '+ 
//   '   "categories1": "' + bga_2_cat1 +'",     '+ 
//   '   "categories2": "' + bga_2_cat2 +'",     '+ 
//   '   "categories3": "' + bga_2_cat3 +'",     '+ 
//   '   "bga_aligment": "' + bga_2_aligment +'",     '+ 
//   '   "bga_bg_image": "' + bga_2_img +'",     '+ 
//   '   "bga_url": "' + bga_2_url +'",     '+ 
//   // '   "bga_line_1":"'  + bga_1_line_2 + '",'+
//   '   "bga_h2":"'  + bga_2_h2 + '",'+
//   // '   "bga_text_top_cta":"'  + bga_2_text_top_cta + '",'+
//   '   "bga_cta_type":"'  + bga_2_cta_type + '",'+
//   '   "bga_cta_text":"'  + bga_2_cta + '"'+   
//   '}'+  


// ']}';


// bga_cat_list_specific2 = '{"bgas":['+

//   '{  "position": "' + bga_2_position +'",     '+ 
//   '   "type": "' + bga_2_type +'",     '+ 
//   '   "key": "' + bga_2_key +'",     '+ 
//   '   "categories1": "' + bga_2_cat1 +'",     '+ 
//   '   "categories2": "' + bga_2_cat2 +'",     '+ 
//   '   "categories3": "' + bga_2_cat3 +'",     '+ 
//   '   "bga_aligment": "' + bga_2_aligment +'",     '+ 
//   '   "bga_bg_image": "' + bga_2_img +'",     '+ 
//   '   "bga_url": "' + bga_2_url +'",     '+ 
//   // '   "bga_line_1":"'  + bga_1_line_2 + '",'+
//   '   "bga_h2":"'  + bga_2_h2 + '",'+
//   // '   "bga_text_top_cta":"'  + bga_2_text_top_cta + '",'+
//   '   "bga_cta_type":"'  + bga_2_cta_type + '",'+
//   '   "bga_cta_text":"'  + bga_2_cta + '"'+   
//   '}'+


// ']}';

document.addEventListener("DOMContentLoaded", function(){

var is_there_breadcrumbs = $('.product-breadcrumb').length;



if((is_there_breadcrumbs != 0) && (window.location.href.indexOf("/categories/") > -1)){
  jm_fired_s = 0;
  jm_fired_g = 0;
  
  jm_breadcrumb_1 = $('.breadcrumb').children()[0];
  jm_breadcrumb_2 = $('.breadcrumb').children()[1];
  jm_breadcrumb_3 = $('.breadcrumb').children()[2];


    if((jm_breadcrumb_3 === undefined) || (jm_breadcrumb_3 == "todo")){
        jm_breadcrumb_1_text = jm_breadcrumb_1.innerText.replace(/ /g,'').toLowerCase();
        jm_breadcrumb_2_text = jm_breadcrumb_2.innerText.replace(/ /g,'').toLowerCase();
        jm_breadcrumb_3_text = "todo";        
    }
    else if((jm_breadcrumb_2 === undefined)){
        jm_breadcrumb_1_text = jm_breadcrumb_1.innerText.replace(/ /g,'').toLowerCase();
        jm_breadcrumb_2_text = "todo";
        jm_breadcrumb_3_text = "todo";
    }
    else{
        jm_breadcrumb_1_text = jm_breadcrumb_1.innerText.replace(/ /g,'').toLowerCase();
        jm_breadcrumb_2_text = jm_breadcrumb_2.innerText.replace(/ /g,'').toLowerCase();
        jm_breadcrumb_3_text = jm_breadcrumb_3.innerText.replace(/ /g,'').toLowerCase();        
    }
    jm_breadcrumb_all = jm_breadcrumb_1_text + " > " + jm_breadcrumb_2_text + " > " + jm_breadcrumb_3_text;
    scrolling_on_clp(jm_breadcrumb_1_text, jm_breadcrumb_2_text, jm_breadcrumb_3_text);
}

});

function scrolling_on_clp(jm_breadcrumb_1_text, jm_breadcrumb_2_text, jm_breadcrumb_3_text){
    // console.log(jm_breadcrumb_1_text);
    // console.log(jm_breadcrumb_2_text);
    // console.log(jm_breadcrumb_3_text);
    console.log(jm_breadcrumb_all);
    window.onscroll = function() {
        if($('.product-breadcrumb')){
          on_scroll_show_bga_global(bga_cat_list_global);  
          //on_scroll_show_bga_specific(bga_cat_list_specific);
          // on_scroll_show_bga_specific2(bga_cat_list_specific2);
        }
    };
}

function on_scroll_show_bga_specific(bga_cat_list_specific) {
    
    obj = JSON.parse(bga_cat_list_specific);

    var hT = $('.product-search-wrapper > div:nth-of-type('+ (obj.bgas[0].position - 3) +')').offset().top,
      hH = $('.product-search-wrapper > div:nth-of-type('+ (obj.bgas[0].position - 3) +')').outerHeight(),
      wH = $(window).height(),
      wS = $(this).scrollTop();

    if (wS > (hT+hH-wH)){
        for (var i = 0; i < obj.bgas.length; i++) {      
          var jm_is_category_1 = obj.bgas[i].categories1.split(',').indexOf(jm_breadcrumb_1_text) > -1;
          var jm_is_category_2 = obj.bgas[i].categories2.split(',').indexOf(jm_breadcrumb_2_text) > -1;
          var jm_is_category_3 = obj.bgas[i].categories3.split(',').indexOf(jm_breadcrumb_3_text) > -1;
          jm_fired_s++;


          if((jm_fired_s <= obj.bgas.length) && (jm_is_category_1) && (jm_is_category_2) && (jm_is_category_3)) {
            console.log("BGA specific");
            
            $('.product-search-wrapper > div:nth-of-type('+ (obj.bgas[i].position-1) +').tile-element').after(

              '<aside class="tile-box tile-element jm-bga-clp jm-bga-type-' + obj.bgas[i].type + '">'+
                '<div class="jm-bga-wrap jm-bga-14-' + obj.bgas[i].key + '" style="background: url(\' ' + obj.bgas[i].bga_bg_image + '\'); align-items: ' +  obj.bgas[i].bga_aligment + ';"> '+
                  '<div>'+
                    '<a class="jm-clickable-image" href="' + obj.bgas[i].bga_url + '" target="_blank" aria-hidden="true" role="none" tabindex="-1"></a>'+
                    // obj.bgas[i].bga_line_1+
                    '<h2 class="jm-bga-header" id="jm-bga-header-' + obj.bgas[i].key + '">' + obj.bgas[i].bga_h2 + '</h2>'+
                    '<div class="jm-bga-cta-wrap">'+
                      // obj.bgas[i].bga_text_top_cta +
                      '<a href="' + obj.bgas[i].bga_url + '" class="btn jm-cta-button jm-cta-button-' +  obj.bgas[i].bga_cta_type + '" id="jm-bga-cta-' + obj.bgas[i].key + '" aria-labelledby="jm-bga-cta-' + obj.bgas[i].key + ' jm-bga-header-' + obj.bgas[i].key + '">' + obj.bgas[i].bga_cta_text + '</a>'+
                    '</div>'+
                  '</div>'+
                '</div>'+
              '</aside>'

            )

          }

        }
    }

}

function on_scroll_show_bga_specific2(bga_cat_list_specific) {
    
    obj = JSON.parse(bga_cat_list_specific);

    var hT = $('.product-search-wrapper > div:nth-of-type('+ (obj.bgas[0].position - 3) +')').offset().top,
      hH = $('.product-search-wrapper > div:nth-of-type('+ (obj.bgas[0].position - 3) +')').outerHeight(),
      wH = $(window).height(),
      wS = $(this).scrollTop();

    if (wS > (hT+hH-wH)){
        for (var i = 0; i < obj.bgas.length; i++) {      
          var jm_is_category_1 = obj.bgas[i].categories1.split(',').indexOf(jm_breadcrumb_1_text) > -1;
          var jm_is_category_2 = obj.bgas[i].categories2.split(',').indexOf(jm_breadcrumb_2_text) > -1;
          var jm_is_category_3 = obj.bgas[i].categories3.split(',').indexOf(jm_breadcrumb_3_text) > -1;
          jm_fired_s++;


          if((jm_fired_s <= obj.bgas.length) && (jm_is_category_1) && (jm_is_category_2) && (jm_is_category_3)) {
            console.log("BGA specific");
            
            $('.product-search-wrapper > div:nth-of-type('+ (obj.bgas[i].position-1) +').tile-element').after(

              '<aside class="tile-box tile-element jm-bga-clp jm-bga-type-' + obj.bgas[i].type + '">'+
                '<div class="jm-bga-wrap jm-bga-14-' + obj.bgas[i].key + '" style="background: url(\' ' + obj.bgas[i].bga_bg_image + '\'); align-items: ' +  obj.bgas[i].bga_aligment + ';"> '+
                  '<div>'+
                    '<a class="jm-clickable-image" href="' + obj.bgas[i].bga_url + '" target="_blank" aria-hidden="true" role="none" tabindex="-1"></a>'+
                    // obj.bgas[i].bga_line_1+
                    '<h2 class="jm-bga-header" id="jm-bga-header-' + obj.bgas[i].key + '">' + obj.bgas[i].bga_h2 + '</h2>'+
                    '<div class="jm-bga-cta-wrap">'+
                      // obj.bgas[i].bga_text_top_cta +
                      '<a href="' + obj.bgas[i].bga_url + '" class="btn jm-cta-button jm-cta-button-' +  obj.bgas[i].bga_cta_type + '" id="jm-bga-cta-' + obj.bgas[i].key + '" aria-labelledby="jm-bga-cta-' + obj.bgas[i].key + ' jm-bga-header-' + obj.bgas[i].key + '">' + obj.bgas[i].bga_cta_text + '</a>'+
                    '</div>'+
                  '</div>'+
                '</div>'+
              '</aside>'

            )

          }

        }
    }

}


function on_scroll_show_bga_global(bga_cat_list_global) {
    //console.log("BGA function");
    obj = JSON.parse(bga_cat_list_global);

    var hT = $('.product-search-wrapper > div:nth-of-type('+ (obj.gbgas[0].gposition - 3) +')').offset().top,
      hH = $('.product-search-wrapper > div:nth-of-type('+ (obj.gbgas[0].gposition - 3) +')').outerHeight(),
      wH = $(window).height(),
      wS = $(this).scrollTop();

    if (wS > (hT+hH-wH)){
        for (var i = 0; i < obj.gbgas.length; i++) {      
          var jm_is_category_1 = obj.gbgas[i].gcategories1.split(',').indexOf(jm_breadcrumb_1_text) > -1;
          var jm_is_category_2 = obj.gbgas[i].gcategories2.split(',').indexOf(jm_breadcrumb_2_text) > -1;
          var jm_is_category_3 = obj.gbgas[i].gcategories3.split(',').indexOf(jm_breadcrumb_3_text) > -1;
          var jm_is_category_3_exception = obj.gbgas[i].gcategories3_exception.split(',').indexOf(jm_breadcrumb_all) > -1;
          jm_fired_g++;

          if((jm_fired_g <= obj.gbgas.length) && (jm_is_category_1) && (!jm_is_category_3_exception)) {
            
            $('.product-search-wrapper > div:nth-of-type('+ (obj.gbgas[i].gposition-1) +').tile-element').after(

              '<aside class="tile-box tile-element jm-bga-clp jm-bga-type-' + obj.gbgas[i].gtype + '">'+
                '<div class="jm-bga-wrap jm-bga-14-' + obj.gbgas[i].gkey + '" style="background: url(\' ' + obj.gbgas[i].gbga_bg_image + '\'); align-items: ' +  obj.gbgas[i].gbga_aligment + ';"> '+
                // '<div class="jm-bga-wrap jm-bga-14-' + obj.gbgas[i].gkey + '" style="background: ' + obj.gbgas[i].gbga_bg_image + '; align-items: ' +  obj.gbgas[i].gbga_aligment + ';"> '+
                  '<div>'+
                    '<a class="jm-clickable-image" href="' + obj.gbgas[i].gbga_url + '" target="_blank" aria-hidden="true" role="none" tabindex="-1"></a>'+
                    // obj.gbgas[i].gbga_line_1+
                    '<h2 class="jm-bga-header" id="jm-bga-header-' + obj.gbgas[i].gkey + '">' + obj.gbgas[i].gbga_h2 + '</h2>'+
                    '<div class="jm-bga-cta-wrap">'+
                      obj.gbgas[i].gbga_text_top_cta +
                      '<a href="' + obj.gbgas[i].gbga_url + '" class="btn jm-cta-button jm-cta-button-' +  obj.gbgas[i].gbga_cta_type + '" id="jm-bga-cta-' + obj.gbgas[i].gkey + '" aria-labelledby="jm-bga-cta-' + obj.gbgas[i].gkey + ' jm-bga-header-' + obj.gbgas[i].gkey + '">' + obj.gbgas[i].gbga_cta_text + '</a>'+
                    '</div>'+
                  '</div>'+
                '</div>'+
              '</aside>'

            )

          }

        }
    }

}
</script>